"""
dados.
"""

from collections import OrderedDict
from typing import Dict, List

# ==================== Dados ====================

# 
GAN = ["", "", "", "", "", "", "", "", "", ""]

# 
ZHI = ["", "", "", "", "", "", "", "Não", "", "", "", ""]

# 
SHENG_XIAO = ["", "", "", "", "", "", "", "", "", "", "", ""]

# Em
NUM_CN = ["", "", "", "", "", "", "", "", "", "", ""]

# ==================== Dados ====================

# 
GAN_WUXING = {
    "": "",
    "": "",
    "": "",
    "": "",
    "": "",
    "": "",
    "": "",
    "": "",
    "": "",
    "": "",
}

# 
ZHI_WUXING = {
    "": "",
    "": "",
    "": "",
    "": "",
    "": "",
    "": "",
    "": "",
    "Não": "",
    "": "",
    "": "",
    "": "",
    "": "",
}

# 
WUXING_GROUPS = {
    "": "",
    "": "",
    "": "",
    "": "",
    "": "Não",
}

# 
WUXING = ["", "", "", "", ""]

# 
GAN_YINYANG = {
    "": 1,
    "": -1,
    "": 1,
    "": -1,
    "": 1,
    "": -1,
    "": 1,
    "": -1,
    "": 1,
    "": -1,
}

# 
ZHI_YINYANG = {
    "": 1,
    "": -1,
    "": 1,
    "": -1,
    "": 1,
    "": -1,
    "": 1,
    "Não": -1,
    "": 1,
    "": -1,
    "": 1,
    "": -1,
}

# 
WUXING_RELATIONS = {
    ("", ""): "=",
    ("", ""): "→",
    ("", ""): "↓",
    ("", ""): "←",
    ("", ""): "↑",
    ("", ""): "=",
    ("", ""): "→",
    ("", ""): "↓",
    ("", ""): "←",
    ("", ""): "↑",
    ("", ""): "=",
    ("", ""): "→",
    ("", ""): "↓",
    ("", ""): "←",
    ("", ""): "↑",
    ("", ""): "=",
    ("", ""): "→",
    ("", ""): "↓",
    ("", ""): "←",
    ("", ""): "↑",
    ("", ""): "=",
    ("", ""): "→",
    ("", ""): "↓",
    ("", ""): "←",
    ("", ""): "↑",
}

# ====================  ====================

ZHI_CANG_GAN = {
    "": OrderedDict({"": 8}),
    "": OrderedDict({"": 5, "": 2, "": 1}),
    "": OrderedDict({"": 5, "": 2, "": 1}),
    "": OrderedDict({"": 8}),
    "": OrderedDict({"": 5, "": 2, "": 1}),
    "": OrderedDict({"": 5, "": 2, "": 1}),
    "": OrderedDict({"": 5, "": 3}),
    "Não": OrderedDict({"": 5, "": 2, "": 1}),
    "": OrderedDict({"": 5, "": 2, "": 1}),
    "": OrderedDict({"": 8}),
    "": OrderedDict({"": 5, "": 2, "": 1}),
    "": OrderedDict({"": 5, "": 3}),
}

# ====================  ====================

GANZHI_60 = {
    1: "",
    13: "",
    25: "",
    37: "",
    49: "",
    2: "",
    14: "",
    26: "",
    38: "",
    50: "",
    3: "",
    15: "",
    27: "",
    39: "",
    51: "",
    4: "",
    16: "",
    28: "",
    40: "",
    52: "",
    5: "",
    17: "",
    29: "",
    41: "",
    53: "",
    6: "",
    18: "",
    30: "",
    42: "",
    54: "",
    7: "",
    19: "",
    31: "",
    43: "",
    55: "",
    8: "Não",
    20: "Não",
    32: "Não",
    44: "Não",
    56: "Não",
    9: "",
    21: "",
    33: "",
    45: "",
    57: "",
    10: "",
    22: "",
    34: "",
    46: "",
    58: "",
    11: "",
    23: "",
    35: "",
    47: "",
    59: "",
    12: "",
    24: "",
    36: "",
    48: "",
    60: "",
}

# ====================  ====================

# de（100）
TEN_GODS_MAP = {
    # 
    ("", ""): "",
    ("", ""): "",
    ("", ""): "",
    ("", ""): "",
    ("", ""): "",
    ("", ""): "",
    ("", ""): "",
    ("", ""): "",
    ("", ""): "",
    ("", ""): "",
    # 
    ("", ""): "",
    ("", ""): "",
    ("", ""): "",
    ("", ""): "",
    ("", ""): "",
    ("", ""): "",
    ("", ""): "",
    ("", ""): "",
    ("", ""): "",
    ("", ""): "",
    # 
    ("", ""): "",
    ("", ""): "",
    ("", ""): "",
    ("", ""): "",
    ("", ""): "",
    ("", ""): "",
    ("", ""): "",
    ("", ""): "",
    ("", ""): "",
    ("", ""): "",
    # 
    ("", ""): "",
    ("", ""): "",
    ("", ""): "",
    ("", ""): "",
    ("", ""): "",
    ("", ""): "",
    ("", ""): "",
    ("", ""): "",
    ("", ""): "",
    ("", ""): "",
    # 
    ("", ""): "",
    ("", ""): "",
    ("", ""): "",
    ("", ""): "",
    ("", ""): "",
    ("", ""): "",
    ("", ""): "",
    ("", ""): "",
    ("", ""): "",
    ("", ""): "",
    # 
    ("", ""): "",
    ("", ""): "",
    ("", ""): "",
    ("", ""): "",
    ("", ""): "",
    ("", ""): "",
    ("", ""): "",
    ("", ""): "",
    ("", ""): "",
    ("", ""): "",
    # 
    ("", ""): "",
    ("", ""): "",
    ("", ""): "",
    ("", ""): "",
    ("", ""): "",
    ("", ""): "",
    ("", ""): "",
    ("", ""): "",
    ("", ""): "",
    ("", ""): "",
    # 
    ("", ""): "",
    ("", ""): "",
    ("", ""): "",
    ("", ""): "",
    ("", ""): "",
    ("", ""): "",
    ("", ""): "",
    ("", ""): "",
    ("", ""): "",
    ("", ""): "",
    # 
    ("", ""): "",
    ("", ""): "",
    ("", ""): "",
    ("", ""): "",
    ("", ""): "",
    ("", ""): "",
    ("", ""): "",
    ("", ""): "",
    ("", ""): "",
    ("", ""): "",
    # 
    ("", ""): "",
    ("", ""): "",
    ("", ""): "",
    ("", ""): "",
    ("", ""): "",
    ("", ""): "",
    ("", ""): "",
    ("", ""): "",
    ("", ""): "",
    ("", ""): "",
}

# ====================  ====================

# 
ZHI_LIUHE = [
    ("", ""),
    ("", ""),
    ("", ""),
    ("", ""),
    ("", ""),
    ("", "Não"),
]

# 
ZHI_SANHE = [
    ["", "", ""],  # 
    ["", "", ""],  # 
    ["", "", ""],  # 
    ["", "", "Não"],  # 
]

# 
ZHI_CHONG = [
    ("", ""),
    ("", "Não"),
    ("", ""),
    ("", ""),
    ("", ""),
    ("", ""),
]

# 
ZHI_XING = [
    ["", "", ""],  # 
    ["", "", "Não"],  # 
    ["", ""],  # 
    ["", ""],
    ["", ""],
    ["", ""],
    ["", ""],  # 
]

# 
ZHI_HAI = [
    ("", "Não"),
    ("", ""),
    ("", ""),
    ("", ""),
    ("", ""),
    ("", ""),
]

# 
ZHI_RELATIONS = {
    "": {
        "": "",
        "": "",
        "": "",
        "": ("", ""),
        "": ("", ""),
        "": "Não",
        "": "",
        "": "",
        "": "",
    },
    "": {
        "": "Não",
        "": "",
        "": "Não",
        "": ("", ""),
        "": ("", ""),
        "": "",
        "": "",
        "": "",
        "": "",
    },
    "": {
        "": "",
        "": "",
        "": "",
        "": ("", ""),
        "": ("", ""),
        "": "",
        "": "",
        "": "",
        "": "",
    },
    "": {
        "": "",
        "": "",
        "": "",
        "": ("Não", ""),
        "": ("", ""),
        "": "",
        "": "",
        "": "",
        "": "",
    },
    "": {
        "": "",
        "": "",
        "": "",
        "": ("", ""),
        "": ("", ""),
        "": "",
        "": "",
        "": "",
        "": "",
    },
    "": {
        "": "",
        "": "",
        "": "",
        "": ("", ""),
        "": ("", "Não"),
        "": "",
        "": "",
        "": "",
        "": "",
    },
    "": {
        "": "",
        "": "",
        "": "",
        "": ("", ""),
        "": ("", "Não"),
        "": "",
        "": "",
        "": "Não",
        "": "",
    },
    "Não": {
        "": "",
        "": "",
        "": "",
        "": ("", ""),
        "": ("", ""),
        "": "",
        "": "",
        "": "",
        "": "",
    },
    "": {
        "": "",
        "": "",
        "": "",
        "": ("", ""),
        "": ("", ""),
        "": "",
        "": "",
        "": "",
        "": "",
    },
    "": {
        "": "",
        "": "",
        "": "",
        "": ("", ""),
        "": ("", ""),
        "": "",
        "": "",
        "": "",
        "": "",
    },
    "": {
        "": "",
        "": "Não",
        "": "",
        "": ("", ""),
        "": ("", ""),
        "": "",
        "": "Não",
        "": "",
        "": "",
    },
    "": {
        "": "",
        "": "",
        "": "",
        "": ("", "Não"),
        "": ("", ""),
        "": "",
        "": "",
        "": "",
        "": "",
    },
}

# 
ZHI_SAN_HE = {"": "", "": "", "": "", "Não": ""}

# 
ZHI_LIU_HE = {
    "": "",
    "": "",
    "": "",
    "": "",
    "": "",
    "Não": "",
}

# 
ZHI_SAN_HUI = {
    "": "",
    "": "",
    "Não": "",
    "": "",
}

# ====================  ====================

NAYIN_TABLE = {
    ("", ""): "Em",
    ("", ""): "Em",
    ("", ""): "Em",
    ("", ""): "Em",
    ("", ""): "",
    ("", ""): "",
    ("", ""): "",
    ("", "Não"): "",
    ("", ""): "",
    ("", ""): "",
    ("", ""): "",
    ("", ""): "",
    ("", ""): "",
    ("", ""): "",
    ("", ""): "",
    ("", ""): "",
    ("", ""): "",
    ("", ""): "",
    ("", ""): "",
    ("", "Não"): "",
    ("", ""): "",
    ("", ""): "",
    ("", ""): "",
    ("", ""): "",
    ("", ""): "",
    ("", ""): "",
    ("", ""): "",
    ("", ""): "",
    ("", ""): "",
    ("", ""): "",
    ("", ""): "Em",
    ("", "Não"): "Em",
    ("", ""): "",
    ("", ""): "",
    ("", ""): "",
    ("", ""): "",
    ("", ""): "",
    ("", ""): "",
    ("", ""): "",
    ("", ""): "",
    ("", ""): "",
    ("", ""): "",
    ("", ""): "",
    ("", "Não"): "",
    ("", ""): "",
    ("", ""): "",
    ("", ""): "",
    ("", ""): "",
    ("", ""): "",
    ("", ""): "",
    ("", ""): "",
    ("", ""): "",
    ("", ""): "Em",
    ("", ""): "Em",
    ("", ""): "",
    ("", "Não"): "",
    ("", ""): "",
    ("", ""): "",
}

# ====================  ====================

# 
TIANYI_GUIREN = {
    "": "Não",
    "": "",
    "": "",
    "": "",
    "": "Não",
    "": "",
    "": "Não",
    "": "",
    "": "",
    "": "",
}

# 
WENCHANG_GUIREN = {
    "": "",
    "": "",
    "": "",
    "": "",
    "": "",
    "": "",
    "": "",
    "": "",
    "": "",
    "": "",
}

# 
YIMA_XING = {
    "": "",
    "": "",
    "": "",
    "": "",
    "": "",
    "": "",
    "": "",
    "Não": "",
    "": "",
    "": "",
    "": "",
    "": "",
}

# 
TAOHUA_XING = {
    "": "",
    "": "",
    "": "",
    "": "",
    "": "",
    "": "",
    "": "",
    "Não": "",
    "": "",
    "": "",
    "": "",
    "": "",
}

# 
HUAGAI_XING = {
    "": "",
    "": "",
    "": "",
    "": "Não",
    "": "",
    "": "",
    "": "",
    "Não": "Não",
    "": "",
    "": "",
    "": "",
    "": "Não",
}

# ====================  ====================

CHANGSHENG_TWELVE = {
    "": {
        "": "",
        "": "",
        "": "",
        "": "",
        "": "",
        "": "",
        "": "",
        "Não": "",
        "": "",
        "": "",
        "": "",
        "": "",
    },
    "": {
        "": "",
        "": "",
        "": "",
        "": "",
        "": "",
        "": "",
        "": "",
        "Não": "",
        "": "",
        "": "",
        "": "",
        "": "",
    },
    "": {
        "": "",
        "": "",
        "": "",
        "": "",
        "": "",
        "": "",
        "": "",
        "Não": "",
        "": "",
        "": "",
        "": "",
        "": "",
    },
    "": {
        "": "",
        "": "",
        "": "",
        "": "",
        "": "",
        "": "",
        "": "",
        "Não": "",
        "": "",
        "": "",
        "": "",
        "": "",
    },
    "": {
        "": "",
        "": "",
        "": "",
        "": "",
        "": "",
        "": "",
        "": "",
        "Não": "",
        "": "",
        "": "",
        "": "",
        "": "",
    },
    "": {
        "": "",
        "": "",
        "": "",
        "": "",
        "": "",
        "": "",
        "": "",
        "Não": "",
        "": "",
        "": "",
        "": "",
        "": "",
    },
    "": {
        "": "",
        "": "",
        "": "",
        "": "",
        "": "",
        "": "",
        "": "",
        "Não": "",
        "": "",
        "": "",
        "": "",
        "": "",
    },
    "": {
        "": "",
        "": "",
        "": "",
        "": "",
        "": "",
        "": "",
        "": "",
        "Não": "",
        "": "",
        "": "",
        "": "",
        "": "",
    },
    "": {
        "": "",
        "": "",
        "": "",
        "": "",
        "": "",
        "": "",
        "": "",
        "Não": "",
        "": "",
        "": "",
        "": "",
        "": "",
    },
    "": {
        "": "",
        "": "",
        "": "",
        "": "",
        "": "",
        "": "",
        "": "",
        "Não": "",
        "": "",
        "": "",
        "": "",
        "": "",
    },
}

# ====================  ====================


def get_ten_gods_relation(day_master: str, other_stem: str) -> str:
    """
    .
    """
    return TEN_GODS_MAP.get((day_master, other_stem), "Não")


def get_nayin(gan: str, zhi: str) -> str:
    """
    .
    """
    return NAYIN_TABLE.get((gan, zhi), "Não")


def get_zhi_relation(zhi1: str, zhi2: str, relation_type: str) -> bool:
    """
    Pesquisar.
    """
    if zhi1 not in ZHI_RELATIONS:
        return False

    relation = ZHI_RELATIONS[zhi1].get(relation_type)
    if relation is None:
        return False

    if isinstance(relation, tuple):
        return zhi2 in relation
    else:
        return zhi2 == relation


def get_changsheng_state(gan: str, zhi: str) -> str:
    """
    estado.
    """
    return CHANGSHENG_TWELVE.get(gan, {}).get(zhi, "Não")


def get_shensha(item: str, shensha_type: str) -> str:
    """
    .
    """
    shensha_tables = {
        "tianyi": TIANYI_GUIREN,
        "wenchang": WENCHANG_GUIREN,
        "yima": YIMA_XING,
        "taohua": TAOHUA_XING,
        "huagai": HUAGAI_XING,
    }

    table = shensha_tables.get(shensha_type, {})
    return table.get(item, "")


def analyze_zhi_combinations(zhi_list: List[str]) -> Dict[str, List[str]]:
    """
    （、、Aguardar）
    """
    result = {
        "sanhe": [],
        "liuhe": [],
        "sanhui": [],
        "chong": [],
        "xing": [],
        "hai": [],
    }

    # Pesquisar
    for combo, element in ZHI_SAN_HE.items():
        if all(zhi in zhi_list for zhi in combo):
            result["sanhe"].append(f"{combo}{element}")

    # Pesquisar
    for i, zhi1 in enumerate(zhi_list):
        for j, zhi2 in enumerate(zhi_list[i + 1 :], i + 1):
            combo = "".join(sorted([zhi1, zhi2]))
            if combo in ZHI_LIU_HE:
                result["liuhe"].append(f"{zhi1}{zhi2}{ZHI_LIU_HE[combo]}")

    # Pesquisar
    for combo, element in ZHI_SAN_HUI.items():
        if all(zhi in zhi_list for zhi in combo):
            result["sanhui"].append(f"{combo}{element}")

    # Pesquisar、、
    for i, zhi1 in enumerate(zhi_list):
        for zhi2 in zhi_list[i + 1 :]:
            if get_zhi_relation(zhi1, zhi2, ""):
                result["chong"].append(f"{zhi1}{zhi2}")
            if get_zhi_relation(zhi1, zhi2, ""):
                result["xing"].append(f"{zhi1}{zhi2}")
            if get_zhi_relation(zhi1, zhi2, ""):
                result["hai"].append(f"{zhi1}{zhi2}")

    return result
